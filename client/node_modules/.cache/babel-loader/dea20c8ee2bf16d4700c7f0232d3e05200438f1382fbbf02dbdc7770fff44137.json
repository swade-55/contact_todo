{"ast":null,"code":"import React,{useState}from'react';import{useSelector,useDispatch}from'react-redux';import{useNavigate}from'react-router-dom';import{Formik,Form,Field,ErrorMessage}from'formik';import*as Yup from'yup';import{updateCompany,deleteCompany}from'./slices/companiesSlice';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const ManageCompanies=()=>{const companies=useSelector(state=>state.companies.companies);const dispatch=useDispatch();const navigate=useNavigate();const[editRowId,setEditRowId]=useState(null);const companySchema=Yup.object().shape({name:Yup.string().required('Name is required').min(2,'Name must be at least 2 characters').max(50,'Name must not exceed 50 characters')});const handleBack=()=>{navigate('/');};const handleAddCompanyClick=()=>{navigate('/add-company');};const handleAddUserClick=()=>{navigate('/add-user');};const handleCancelClick=()=>{setEditRowId(null);};const handleDeleteClick=companyId=>{if(window.confirm('Are you sure you want to delete this company?')){dispatch(deleteCompany(companyId)).catch(error=>{console.error('Delete failed',error);});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mx-auto p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleAddCompanyClick,className:\"btn btn-primary\",children:\"Add New Company\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddUserClick,className:\"btn btn-secondary\",children:\"Add New User\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleBack,className:\"btn\",children:\"Back to Home\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-x-auto\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table w-full\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Manager ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:companies.map(company=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:company.id}),/*#__PURE__*/_jsx(\"td\",{children:company.manager_id}),/*#__PURE__*/_jsx(\"td\",{children:editRowId===company.id?/*#__PURE__*/_jsx(Formik,{initialValues:{name:company.name},validationSchema:companySchema,onSubmit:(values,_ref)=>{let{setSubmitting}=_ref;dispatch(updateCompany({...company,name:values.name})).catch(error=>console.error('Update failed',error));setEditRowId(null);setSubmitting(false);},children:_ref2=>{let{isSubmitting}=_ref2;return/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsx(Field,{name:\"name\",type:\"text\",className:\"input input-bordered w-full max-w-xs\"}),/*#__PURE__*/_jsx(ErrorMessage,{name:\"name\",component:\"div\",className:\"text-error\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end mt-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:isSubmitting,className:\"btn btn-success\",children:\"Save\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleCancelClick,className:\"btn btn-ghost\",children:\"Cancel\"})]})]});}}):company.name}),/*#__PURE__*/_jsx(\"td\",{children:editRowId===company.id?/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteClick(company.id),className:\"btn btn-error\",children:\"Delete\"}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setEditRowId(company.id),className:\"btn btn-accent\",children:\"Edit\"})})]},company.id))})]})})]});};export default ManageCompanies;","map":{"version":3,"names":["React","useState","useSelector","useDispatch","useNavigate","Formik","Form","Field","ErrorMessage","Yup","updateCompany","deleteCompany","jsx","_jsx","jsxs","_jsxs","ManageCompanies","companies","state","dispatch","navigate","editRowId","setEditRowId","companySchema","object","shape","name","string","required","min","max","handleBack","handleAddCompanyClick","handleAddUserClick","handleCancelClick","handleDeleteClick","companyId","window","confirm","catch","error","console","className","children","onClick","map","company","id","manager_id","initialValues","validationSchema","onSubmit","values","_ref","setSubmitting","_ref2","isSubmitting","type","component","disabled"],"sources":["/home/samuelrcwade/Development/Code/Phase4/contact_todo/client/src/components/ManageCompanies.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useNavigate } from 'react-router-dom';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport * as Yup from 'yup';\nimport { updateCompany, deleteCompany } from './slices/companiesSlice';\n\nconst ManageCompanies = () => {\n  const companies = useSelector((state) => state.companies.companies);\n  const dispatch = useDispatch();\n  const navigate = useNavigate();\n  const [editRowId, setEditRowId] = useState(null);\n\n  const companySchema = Yup.object().shape({\n    name: Yup.string()\n      .required('Name is required')\n      .min(2, 'Name must be at least 2 characters')\n      .max(50, 'Name must not exceed 50 characters'),\n  });\n\n  const handleBack = () => {\n    navigate('/');\n  };\n\n  const handleAddCompanyClick = () => {\n    navigate('/add-company');\n  };\n\n  const handleAddUserClick = () => {\n    navigate('/add-user');\n  };\n\n  const handleCancelClick = () => {\n    setEditRowId(null);\n  };\n\n  const handleDeleteClick = (companyId) => {\n    if (window.confirm('Are you sure you want to delete this company?')) {\n      dispatch(deleteCompany(companyId))\n        .catch((error) => {\n          console.error('Delete failed', error);\n        });\n    }\n  };\n\n  return (\n    <div className=\"container mx-auto p-4\">\n      <div className=\"flex justify-between mb-4\">\n        <button onClick={handleAddCompanyClick} className=\"btn btn-primary\">Add New Company</button>\n        <button onClick={handleAddUserClick} className=\"btn btn-secondary\">Add New User</button>\n        <button onClick={handleBack} className=\"btn\">Back to Home</button>\n      </div>\n      <div className=\"overflow-x-auto\">\n        <table className=\"table w-full\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>Manager ID</th>\n              <th>Name</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {companies.map((company) => (\n              <tr key={company.id}>\n                <td>{company.id}</td>\n                <td>{company.manager_id}</td>\n                <td>\n                  {editRowId === company.id ? (\n                    <Formik\n                      initialValues={{ name: company.name }}\n                      validationSchema={companySchema}\n                      onSubmit={(values, { setSubmitting }) => {\n                        dispatch(updateCompany({ ...company, name: values.name }))\n                          .catch((error) => console.error('Update failed', error));\n                        setEditRowId(null);\n                        setSubmitting(false);\n                      }}\n                    >\n                      {({ isSubmitting }) => (\n                        <Form>\n                          <Field name=\"name\" type=\"text\" className=\"input input-bordered w-full max-w-xs\" />\n                          <ErrorMessage name=\"name\" component=\"div\" className=\"text-error\" />\n                          <div className=\"flex justify-end mt-2\">\n                            <button type=\"submit\" disabled={isSubmitting} className=\"btn btn-success\">Save</button>\n                            <button type=\"button\" onClick={handleCancelClick} className=\"btn btn-ghost\">Cancel</button>\n                          </div>\n                        </Form>\n                      )}\n                    </Formik>\n                  ) : (\n                    company.name\n                  )}\n                </td>\n                <td>\n                  {editRowId === company.id ? (\n                    <button onClick={() => handleDeleteClick(company.id)} className=\"btn btn-error\">Delete</button>\n                  ) : (\n                    <button onClick={() => setEditRowId(company.id)} className=\"btn btn-accent\">Edit</button>\n                  )}\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n};\n\nexport default ManageCompanies;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}